<!doctype html><html lang=en dir=auto><head><meta charset=utf-8><meta http-equiv=X-UA-Compatible content="IE=edge"><meta name=viewport content="width=device-width,initial-scale=1,shrink-to-fit=no"><meta name=robots content="index, follow"><title>LC3 Brief Review | Hanbin Zheng</title><meta name=keywords content="lc3,assembly,recursion,data-structures"><meta name=description content="
This is a brief review for some topics of ECE220.
Since this website cannot render asm code blocks properly, I used nasm instead — though this is actually LC-3 assembly code.
I. Purpose and Description
1. Purpose
This program serves as a review for:

LC3 basics (including I/O)
Run-time stack
Recursion (LC3 implementation)
Linked list (LC3 implementation)
Binary tree (LC3 implementation)

2. Descriptions

This file primarily serves as a direct LC-3 translation of a C program that prints a file directory structure.
The content to be printed is pre-stored in specific data structures. The program prints this content to the console in a pre-order traversal with a specified output format (see desired output for details).
To fully cover the previous purposes and simulate how C programs are translated into lower-level assembly language, all user-defined C functions are implemented on a run-time stack. Additionally, we&rsquo;ve implemented our own &ldquo;system call&rdquo; equivalent to &ldquo;OUT&rdquo; and &ldquo;PUTS&rdquo; (corresponding to C&rsquo;s printf() function). We name them &ldquo;PRINT_A_CHAR&rdquo; and &ldquo;PRINT_A_STRING&rdquo; respectively. These subroutines don&rsquo;t utilize a run-time stack, just as typical system calls in real-world machines. Their implementation is exactly the same as how LC-3 machine implements &ldquo;OUT&rdquo; and &ldquo;PUTS&rdquo; in its System Space (from x0450 to x0462).
The provided test case is absolutely not exhaustive. It was primarily generated by Gemini, and I&rsquo;ve only revised some grammar mistakes to ensure it works properly for LC-3 syntax. Feel free to add any additional test cases.

3. Data Structure Design
(1) Data Structure for Folders and Files
Data Structure of Files in a Folder (linked list):"><meta name=author content><link rel=canonical href=https://hanbinzheng.github.io/blog/lc3-brief-review/><link crossorigin=anonymous href=/assets/css/stylesheet.8fe10233a706bc87f2e08b3cf97b8bd4c0a80f10675a143675d59212121037c0.css integrity="sha256-j+ECM6cGvIfy4Is8+XuL1MCoDxBnWhQ2ddWSEhIQN8A=" rel="preload stylesheet" as=style><link rel=icon href=https://hanbinzheng.github.io/favicon.ico><link rel=icon type=image/png sizes=16x16 href=https://hanbinzheng.github.io/favicon-16x16.png><link rel=icon type=image/png sizes=32x32 href=https://hanbinzheng.github.io/favicon-32x32.png><link rel=apple-touch-icon href=https://hanbinzheng.github.io/apple-touch-icon.png><link rel=mask-icon href=https://hanbinzheng.github.io/safari-pinned-tab.svg><meta name=theme-color content="#2e2e33"><meta name=msapplication-TileColor content="#2e2e33"><link rel=alternate hreflang=en href=https://hanbinzheng.github.io/blog/lc3-brief-review/><noscript><style>#theme-toggle,.top-link{display:none}</style><style>@media(prefers-color-scheme:dark){:root{--theme:rgb(29, 30, 32);--entry:rgb(46, 46, 51);--primary:rgb(218, 218, 219);--secondary:rgb(155, 156, 157);--tertiary:rgb(65, 66, 68);--content:rgb(196, 196, 197);--code-block-bg:rgb(46, 46, 51);--code-bg:rgb(55, 56, 62);--border:rgb(51, 51, 51)}.list{background:var(--theme)}.list:not(.dark)::-webkit-scrollbar-track{background:0 0}.list:not(.dark)::-webkit-scrollbar-thumb{border-color:var(--theme)}}</style></noscript><script>window.MathJax={tex:{inlineMath:[["$","$"],["\\(","\\)"]],displayMath:[["$$","$$"],["\\[","\\]"]],packages:{"[+]":["ams"]}},options:{skipHtmlTags:["script","noscript","style","textarea","pre","code"]}}</script><script src=https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js defer></script><meta property="og:url" content="https://hanbinzheng.github.io/blog/lc3-brief-review/"><meta property="og:site_name" content="Hanbin Zheng"><meta property="og:title" content="LC3 Brief Review"><meta property="og:description" content=" This is a brief review for some topics of ECE220.
Since this website cannot render asm code blocks properly, I used nasm instead — though this is actually LC-3 assembly code.
I. Purpose and Description 1. Purpose This program serves as a review for:
LC3 basics (including I/O) Run-time stack Recursion (LC3 implementation) Linked list (LC3 implementation) Binary tree (LC3 implementation) 2. Descriptions This file primarily serves as a direct LC-3 translation of a C program that prints a file directory structure. The content to be printed is pre-stored in specific data structures. The program prints this content to the console in a pre-order traversal with a specified output format (see desired output for details). To fully cover the previous purposes and simulate how C programs are translated into lower-level assembly language, all user-defined C functions are implemented on a run-time stack. Additionally, we’ve implemented our own “system call” equivalent to “OUT” and “PUTS” (corresponding to C’s printf() function). We name them “PRINT_A_CHAR” and “PRINT_A_STRING” respectively. These subroutines don’t utilize a run-time stack, just as typical system calls in real-world machines. Their implementation is exactly the same as how LC-3 machine implements “OUT” and “PUTS” in its System Space (from x0450 to x0462). The provided test case is absolutely not exhaustive. It was primarily generated by Gemini, and I’ve only revised some grammar mistakes to ensure it works properly for LC-3 syntax. Feel free to add any additional test cases. 3. Data Structure Design (1) Data Structure for Folders and Files Data Structure of Files in a Folder (linked list):"><meta property="og:locale" content="en-us"><meta property="og:type" content="article"><meta property="article:section" content="blog"><meta property="article:published_time" content="2025-05-26T00:00:00+08:00"><meta property="article:modified_time" content="2025-05-26T00:00:00+08:00"><meta property="article:tag" content="Lc3"><meta property="article:tag" content="Assembly"><meta property="article:tag" content="Recursion"><meta property="article:tag" content="Data-Structures"><meta name=twitter:card content="summary"><meta name=twitter:title content="LC3 Brief Review"><meta name=twitter:description content="
This is a brief review for some topics of ECE220.
Since this website cannot render asm code blocks properly, I used nasm instead — though this is actually LC-3 assembly code.
I. Purpose and Description
1. Purpose
This program serves as a review for:

LC3 basics (including I/O)
Run-time stack
Recursion (LC3 implementation)
Linked list (LC3 implementation)
Binary tree (LC3 implementation)

2. Descriptions

This file primarily serves as a direct LC-3 translation of a C program that prints a file directory structure.
The content to be printed is pre-stored in specific data structures. The program prints this content to the console in a pre-order traversal with a specified output format (see desired output for details).
To fully cover the previous purposes and simulate how C programs are translated into lower-level assembly language, all user-defined C functions are implemented on a run-time stack. Additionally, we&rsquo;ve implemented our own &ldquo;system call&rdquo; equivalent to &ldquo;OUT&rdquo; and &ldquo;PUTS&rdquo; (corresponding to C&rsquo;s printf() function). We name them &ldquo;PRINT_A_CHAR&rdquo; and &ldquo;PRINT_A_STRING&rdquo; respectively. These subroutines don&rsquo;t utilize a run-time stack, just as typical system calls in real-world machines. Their implementation is exactly the same as how LC-3 machine implements &ldquo;OUT&rdquo; and &ldquo;PUTS&rdquo; in its System Space (from x0450 to x0462).
The provided test case is absolutely not exhaustive. It was primarily generated by Gemini, and I&rsquo;ve only revised some grammar mistakes to ensure it works properly for LC-3 syntax. Feel free to add any additional test cases.

3. Data Structure Design
(1) Data Structure for Folders and Files
Data Structure of Files in a Folder (linked list):"><script type=application/ld+json>{"@context":"https://schema.org","@type":"BreadcrumbList","itemListElement":[{"@type":"ListItem","position":1,"name":"Blog","item":"https://hanbinzheng.github.io/blog/"},{"@type":"ListItem","position":2,"name":"LC3 Brief Review","item":"https://hanbinzheng.github.io/blog/lc3-brief-review/"}]}</script><script type=application/ld+json>{"@context":"https://schema.org","@type":"BlogPosting","headline":"LC3 Brief Review","name":"LC3 Brief Review","description":" This is a brief review for some topics of ECE220.\nSince this website cannot render asm code blocks properly, I used nasm instead — though this is actually LC-3 assembly code.\nI. Purpose and Description 1. Purpose This program serves as a review for:\nLC3 basics (including I/O) Run-time stack Recursion (LC3 implementation) Linked list (LC3 implementation) Binary tree (LC3 implementation) 2. Descriptions This file primarily serves as a direct LC-3 translation of a C program that prints a file directory structure. The content to be printed is pre-stored in specific data structures. The program prints this content to the console in a pre-order traversal with a specified output format (see desired output for details). To fully cover the previous purposes and simulate how C programs are translated into lower-level assembly language, all user-defined C functions are implemented on a run-time stack. Additionally, we\u0026rsquo;ve implemented our own \u0026ldquo;system call\u0026rdquo; equivalent to \u0026ldquo;OUT\u0026rdquo; and \u0026ldquo;PUTS\u0026rdquo; (corresponding to C\u0026rsquo;s printf() function). We name them \u0026ldquo;PRINT_A_CHAR\u0026rdquo; and \u0026ldquo;PRINT_A_STRING\u0026rdquo; respectively. These subroutines don\u0026rsquo;t utilize a run-time stack, just as typical system calls in real-world machines. Their implementation is exactly the same as how LC-3 machine implements \u0026ldquo;OUT\u0026rdquo; and \u0026ldquo;PUTS\u0026rdquo; in its System Space (from x0450 to x0462). The provided test case is absolutely not exhaustive. It was primarily generated by Gemini, and I\u0026rsquo;ve only revised some grammar mistakes to ensure it works properly for LC-3 syntax. Feel free to add any additional test cases. 3. Data Structure Design (1) Data Structure for Folders and Files Data Structure of Files in a Folder (linked list):\n","keywords":["lc3","assembly","recursion","data-structures"],"articleBody":" This is a brief review for some topics of ECE220.\nSince this website cannot render asm code blocks properly, I used nasm instead — though this is actually LC-3 assembly code.\nI. Purpose and Description 1. Purpose This program serves as a review for:\nLC3 basics (including I/O) Run-time stack Recursion (LC3 implementation) Linked list (LC3 implementation) Binary tree (LC3 implementation) 2. Descriptions This file primarily serves as a direct LC-3 translation of a C program that prints a file directory structure. The content to be printed is pre-stored in specific data structures. The program prints this content to the console in a pre-order traversal with a specified output format (see desired output for details). To fully cover the previous purposes and simulate how C programs are translated into lower-level assembly language, all user-defined C functions are implemented on a run-time stack. Additionally, we’ve implemented our own “system call” equivalent to “OUT” and “PUTS” (corresponding to C’s printf() function). We name them “PRINT_A_CHAR” and “PRINT_A_STRING” respectively. These subroutines don’t utilize a run-time stack, just as typical system calls in real-world machines. Their implementation is exactly the same as how LC-3 machine implements “OUT” and “PUTS” in its System Space (from x0450 to x0462). The provided test case is absolutely not exhaustive. It was primarily generated by Gemini, and I’ve only revised some grammar mistakes to ensure it works properly for LC-3 syntax. Feel free to add any additional test cases. 3. Data Structure Design (1) Data Structure for Folders and Files Data Structure of Files in a Folder (linked list):\n[0] next pointer：points to next file node (if missing, NULL) [1] file name (.STRINGZ) Data Structure of Folder Nodes：\n[0] left pointer：points to the left child (if missing, NULL) [1] right pointer：points to the right child (if missing, NULL) [2] file pointer：points to the head of the linked list (if missing, NULL) [3] folder name (.STRINGZ) (2) Tree Structure of Folders (testcase emample) root / \\ projects media / \\ / \\ c_project blog documents photos / \\ / \\ \\ utils python_project reports presentations travel \\ sub_travel (3) Files Structure (testcase example) root: config.sys projects: README.md c_project: main.c -\u003e Makefile utils: helper.c python_project: main.py -\u003e requirements.txt blog: index.md media: (empty) documents: meeting_notes.docx -\u003e todo_list.txt reports: q1_report.pdf -\u003e budget_summary.xlsx presentations: project_kickoff.pptx photos: IMG001.jpg -\u003e IMG002.jpg travel: trip.txt -\u003e map.png sub_travel: packing_list.md (4) C Structs and Function Prototypes typedef struct f{ struct f* nextfile; const char* filename; } file_node; typedef struct F{ struct F* left; struct F* right; file_node* file; const char* foldername; } folder_node; // For detailed definitions, refers to comments before each subroutine void print_space(int n); void print_file(int num, file_node* file); void print_folder(int depth, folder_node* folder); 4. Desired Output root file: config.sys projects file: README.md c_project file: main.c Makefile utils file: helper.c python_project file: main.py requirements.txt blog file: index.md media documents file: meeting_notes.docx todo_list.txt reports file: q1_report.pdf budget_summary.xlsx presentations file: project_kickoff.pptx photos file: IMG001.jpg IMG002.jpg travel file: trip.txt map.png sub_travel file: packing_list.md 5. Conventions These conventions are based on my understanding and memory of run-time stack implementations. Please flag any mistakes.\nRegisters:\nR4: Global variable pointer R5: Stack frame pointer (base of local variables) R6: Stack top pointer Stack structure for each function call:\nM[R5 - ?] \u003c- other local variables M[R5 + 0] \u003c- base variable/first local variables (if any) M[R5 + 1] \u003c- caller’s frame pointer M[R5 + 2] \u003c- return address M[R5 + 3] \u003c- return value (reserved even for void functions) M[R5 + ?] \u003c- function arguments Other Conventions:\nFunction arguments and variables should be accessed via R5 (frame pointer) and appropriate offsets, instead of R6. Function arguments should be pushed into the stack from the right to the left before the call, and local variables should be pushed from top to bottom into the stack. Special Clarification:\nIn this program, all C functions conceptually have no local variables in their definitions. However, omitting local variables in run-time stack will lead to “undefined” behaviors (or at least, I failed to find corresponding descriptions in our textbook). For convenience, I redundantly assigned a local variable for print_space(), print_file(), and print_folder() to hide this issue. The main function still lacks local variables. I was unsure how to handle this so I left R5 undefined within the main function. However, R5 is correctly defined in all other three functions, and this omission in main doesn’t affect the overall program behavior. II. LC3 Translation of C Functions 1. main() function ;;; --------------------mian_function------------------------------------- ;;; int main() { ;;; folder_node* root = get_info(); // get_info() is too complex for me to execute with lc3 ;;; // We assume that the info has been read and stored in known data structure ;;; print_folder(0, rootnode); // See next subroutine for function definition ;;; return 0; ;;; } ;;; ;;; R0/R1: temporary register. .ORIG x3000 ;; set stack top pointer(R6) equals to stack bottom LD R6, STACK_BOTTOM ;; main functioin has no local variable and thus I ommit setting R5 ;; push arguments for print_folder(); AND R0, R0, #0 LEA R1, FOLDER_root STR R1, R6, #0 ADD R6, R6, #-1 STR R0, R6, #0 ;; call pirnt_folder() JSR PRINT_FOLDER ;; pop return value(though void) and arguments ADD R6, R6, #3 HALT STACK_BOTTOM .FILL x4000 2. print_folder() function ;;; ----------------------PRINT_FOLDER------------------------------------ ;;; void print_folder(int depth, folder_node* node) { ;;; // This is only check for floder_node* root, not base case for all recursion step. ;;; // A NULL node cannot be passed in if that node is not the root. ;;; if(node == NULL) { ;;; return; ;;; } ;;; ;;; print_space(depth); ;;; folder_node* current = node; ;;; printf(\"%s\", current-\u003efoldername); ;;; ;;; // pre_order print the folder ;;; if(current-\u003efile != NULL) { ;;; printf(\"\\n\"); ;;; print_file(depth+1, current-\u003efile); ;;; } ;;; if(current-\u003eleft != NULL) { ;;; printf(\"\\n\"); ;;; print_folder(depth+1, current-\u003eleft); ;;; } ;;; if(current-\u003eright != NULL) { ;;; printf(\"\\n\"); ;;; print_folder(depth+1, current-\u003eright); ;;; } ;;; } ;;; ;;; R0: temporary register. Caller save is required. ;;; PRINT_FOLDER ;;; set book-keeping info ADD R6, R6, #-2 ; store return address STR R7, R6, #0 ADD R6, R6, #-1 ; store caller's frame pointer STR R5, R6, #0 ADD R6, R6, #-1 ; set R5 as new frame pointer ADD R5, R6, #0 ;;; begin execution ;; if(node == NULL) condition statements LDR R0, R5, #5 BRz PRINT_FOLDER_DONE ;; print space and folder name LDR R0, R5, #4 ; print_space(depth); ADD R6, R6, #-1 STR R0, R6, #0 JSR PRINT_SPACE ADD R6, R6, #2 ; pop the return value and argument LDR R0, R5, #5 ; folder_node* current = node; STR R0, R5, #0 LDR R0, R5, #0 ; printf(\"%s\", current-\u003efile); LDR R0, R0, #3 JSR PRINT_A_STRING PRINT_FOLDER_FILE ;;; print the file for current folder ;;; ;;; if(current-\u003efile != NULL) { ;;; printf(\"\\n\"); ;;; print_file(depth+1, current-\u003efile); ;;; } ;;; LDR R0, R5, #0 ; file ?= NULL LDR R0, R0, #2 BRz PRINT_FOLDER_LEFT ;; printf(\"\\n\"); LD R0, PRINT_FOLDER_NEWLINE JSR PRINT_A_CHAR ;; print_file(depth+1, current-\u003efile); LDR R0, R5, #0 ; push current-\u003efile into stack LDR R0, R0, #2 ADD R6, R6, #-1 STR R0, R6, #0 LDR R0, R5, #4 ; push depth+1 into stack ADD R0, R0, #1 ADD R6, R6, #-1 STR R0, R6, #0 JSR PRINT_FILE ; call print_file() ADD R6, R6, #3 ; pop return value and arguments PRINT_FOLDER_LEFT ;;; print the left child ;;; if(current-\u003eleft != NULL) { ;;; printf(\"\\n\"); ;;; print_folder(depth+1, current-\u003eleft); ;;; } ;;; LDR R0, R5, #0 ; current-\u003eleft ?= NULL LDR R0, R0, #0 BRz PRINT_FOLDER_RIGHT ;; printf(\"\\n\"); LD R0, PRINT_FOLDER_NEWLINE JSR PRINT_A_CHAR ;; print_folder(depth+1, current-\u003eleft); LDR R0, R5, #0 ; push current-\u003eleft into stack LDR R0, R0, #0 ADD R6, R6, #-1 STR R0, R6, #0 LDR R0, R5, #4 ; push depth+1 into stack ADD R0, R0, #1 ADD R6, R6, #-1 STR R0, R6, #0 JSR PRINT_FOLDER ; recursive call ADD R6, R6, #3 ; pop return value and arguments PRINT_FOLDER_RIGHT ;;; rpint the right child ;;; if(current-\u003eright != NULL) { ;;; printf(\"\\n\"); ;;; print_folder(depth+1, current-\u003eright); ;;; } ;;; LDR R0, R5, #0 ; current-\u003eright ?= NULL LDR R0, R0, #1 BRz PRINT_FOLDER_DONE ;; printf(\"\\n\"); LD R0, PRINT_FOLDER_NEWLINE JSR PRINT_A_CHAR ;; print_folder(depth+1, current-\u003eright); LDR R0, R5, #0 ; push current-\u003eright into stack LDR R0, R0, #1 ADD R6, R6, #-1 STR R0, R6, #0 LDR R0, R5, #4 ; push depth+1 into stack ADD R0, R0, #1 ADD R6, R6, #-1 STR R0, R6, #0 JSR PRINT_FOLDER ; recursive call ADD R6, R6, #3 ; pop return value and arguments PRINT_FOLDER_DONE ;;; return control to caller ADD R6, R6, #1 ; restore caller's frame pointer LDR R5, R6, #0 ADD R6, R6, #1 ; get return address LDR R7, R6, #0 ADD R6, R6, #1 ; point R6 to return value RET PRINT_FOLDER_NEWLINE .FILL #10 PRINT_FOLDER_SAVE_R0 .FILL x0000 PRINT_FOLDER_SAVE_R1 .FILL x0000 PRINT_FOLDER_SAVE_R2 .FILL x0000 3. print_file() function ;;; ----------------------PRINT_FILE-------------------------------------- ;;; void print_file(int num, file_node * file) { ;;; if(file == NULL) { ;;; return; ;;; } else { ;;; file_node* next = file; ;;; } ;;; ;;; print_space(num); ;;; ;;; printf(\"file: \"); ;;; ;;; while(next != NULL) { ;;; print(\"%s \", next-\u003efilename); ;;; _next = next.nextfile; ;;; } ;;; } ;;; ;;; R0: temporary register PRINT_FILE ;;; set book-keeping info ADD R6, R6, #-2 STR R7, R6, #0 ; store return address ADD R6, R6, #-1 STR R5, R6, #0 ; store caller's frame pointer ADD R6, R6, #-1 ADD R5, R6, #0 ; set R5 as new frame pointer ;;; begin execution ;; if(file == NULL) condition statements ST R0, PRINT_FILE_SAVE_R0 LDR R0, R5, #5 BRz PRINT_FILE_DONE STR R0, R5, #0 ;; print_space(num); LDR R0, R5, #4 ADD R6, R6, #-1 STR R0, R6, #0 ; call print_space() JSR PRINT_SPACE ADD R6, R6, #2 ; pop return value \u0026 arguments ;; printf(\"file: \"); LEA R0, PRINT_FILE_PROMPT JSR PRINT_A_STRING ;; while loop PRINT_FILE_LOOP LDR R0, R5, #0 ; while condition BRz PRINT_FILE_DONE LDR R0, R0, #1 ; printf(\"%s \", next-\u003efilename); JSR PRINT_A_STRING LD R0, PRINT_FILE_SPACE JSR PRINT_A_CHAR LDR R0, R5, #0 ; next-\u003enextfile LDR R0, R0, #0 STR R0, R5, #0 BRnzp PRINT_FILE_LOOP PRINT_FILE_DONE ;;; return control to caller LD R0, PRINT_FILE_SAVE_R0 ADD R6, R6, #1 ; restore caller's frame pointer LDR R5, R6, #0 ADD R6, R6, #1 ; get return address LDR R7, R6, #0 ADD R6, R6, #1 ; point R6 to return value RET PRINT_FILE_SPACE .FILL #32 PRINT_FILE_PROMPT .STRINGZ \"file: \" PRINT_FILE_NEWLINE .FILL #10 PRINT_FILE_SAVE_R0 .FILL x0000 4. print_space() function ;;; ---------------------PRINT_SPACE------------------------------------ ;;; void print_space(int n) { ;;; int i = 4 * n; ;;; while(i \u003e 0) { ;;; printf(\" \"); ;;; i--; ;;; } ;;; } ;;; ;;; R0: temporary register PRINT_SPACE ;;; set book-keeping info ADD R6, R6, #-2 ; store return address STR R7, R6, #0 ADD R6, R6, #-1 ; store caller's frame pointer STR R5, R6, #0 ADD R6, R6, #-1 ; set R5 as new frame pointer ADD R5, R6, #0 ;;; begin execution of PRINT_SPACE ST R0, PRINT_SPACE_SAVE_R0 LDR R0, R5, #4 ; int i = 4 * n; ADD R0, R0, R0 ADD R0, R0, R0 STR R0, R5, #0 ;; while loop PRINT_SPACE_LOOP LDR R0, R5, #0 ; while condition BRz PRINT_SPACE_DONE LD R0, PRINT_SPACE_SPACE ; printf(\" \"); OUT LDR R0, R5, #0 ; i--; ADD R0, R0, #-1 STR R0, R5, #0 BRnzp PRINT_SPACE_LOOP PRINT_SPACE_DONE ;;; return control to caller LD R0, PRINT_SPACE_SAVE_R0 ADD R6, R6, #1 ; restore caller's frame pointer LDR R5, R6, #0 ADD R6, R6, #1 ; get return value LDR R7, R6, #0 ADD R6, R6, #1 ; point R6 to return value RET PRINT_SPACE_SPACE .FILL #32 PRINT_SPACE_SAVE_R0 .FILL x0000 III. PRINT_A_CHAR and PRINT_A_STRING System Call ;;; -------------------------PRINT_A_CHAR--------------------------------- ;;; The same as \"OUT\". See lc3 memory form x0450 to x0455 for details. PRINT_A_CHAR ST R1, PRINT_A_CHAR_SAVE_R1 POLLING LDI R1, DSR BRzp POLLING STI R0, DDR LD R1, PRINT_A_CHAR_SAVE_R1 RET PRINT_A_CHAR_SAVE_R1 .FILL x0000 DSR .FILL xFE04 DDR .FILL xFE06 ;;; -------------------------PRINT_A_STRING------------------------------- ;;; The same as \"PUTS\". See lc3 memory from x0456 to x0462 for details. PRINT_A_STRING ST R0, PRINT_A_STRING_SAVE_R0 ST R1, PRINT_A_STRING_SAVE_R1 ST R7, PRINT_A_STRING_SAVE_R7 ADD R1, R0, #0 PRINT_A_STRING_LOOP LDR R0, R1, #0 BRz PRINT_A_STRING_DONE JSR PRINT_A_CHAR ADD R1, R1, #1 BRnzp PRINT_A_STRING_LOOP PRINT_A_STRING_DONE LD R0, PRINT_A_STRING_SAVE_R0 LD R1, PRINT_A_STRING_SAVE_R1 LD R7, PRINT_A_STRING_SAVE_R7 RET PRINT_A_STRING_SAVE_R0 .FILL x0000 PRINT_A_STRING_SAVE_R1 .FILL x0000 PRINT_A_STRING_SAVE_R7 .FILL x0000 IV. Data ;;; -------------------------folder_info----------------------------------- FOLDER_root .FILL FOLDER_projects ; left .FILL FOLDER_media ; right .FILL FILE_root ; file .FILL FOLDER_NAME_root ; foldername FOLDER_NAME_root .STRINGZ \"root\" FOLDER_projects .FILL FOLDER_c_project .FILL FOLDER_blog .FILL FILE_projects .FILL FOLDER_NAME_projects FOLDER_NAME_projects .STRINGZ \"projects\" FOLDER_c_project .FILL FOLDER_utils .FILL FOLDER_python_project .FILL FILE_c_project .FILL FOLDER_NAME_c_project FOLDER_NAME_c_project .STRINGZ \"c_project\" FOLDER_utils .FILL x0000 .FILL x0000 .FILL FILE_utils .FILL FOLDER_NAME_utils FOLDER_NAME_utils .STRINGZ \"utils\" FOLDER_blog .FILL x0000 .FILL x0000 .FILL FILE_blog .FILL FOLDER_NAME_blog FOLDER_NAME_blog .STRINGZ \"blog\" FOLDER_media .FILL FOLDER_documents .FILL FOLDER_photos .FILL x0000 .FILL FOLDER_NAME_media FOLDER_NAME_media .STRINGZ \"media\" FOLDER_photos .FILL x0000 .FILL FOLDER_travel .FILL FILE_photos .FILL FOLDER_NAME_photos FOLDER_NAME_photos .STRINGZ \"photos\" FOLDER_travel .FILL x0000 .FILL FOLDER_sub_travel .FILL FILE_travel .FILL FOLDER_NAME_travel FOLDER_NAME_travel .STRINGZ \"travel\" FOLDER_python_project .FILL x0000 .FILL x0000 .FILL FILE_python_project .FILL FOLDER_NAME_python_project FOLDER_NAME_python_project .STRINGZ \"python_project\" FOLDER_documents .FILL FOLDER_reports .FILL FOLDER_presentations .FILL FILE_documents .FILL FOLDER_NAME_documents FOLDER_NAME_documents .STRINGZ \"documents\" FOLDER_reports .FILL x0000 .FILL x0000 .FILL FILE_reports .FILL FOLDER_NAME_reports FOLDER_NAME_reports .STRINGZ \"reports\" FOLDER_presentations .FILL x0000 .FILL x0000 .FILL FILE_presentations .FILL FOLDER_NAME_presentations FOLDER_NAME_presentations .STRINGZ \"presentations\" FOLDER_sub_travel .FILL x0000 .FILL x0000 .FILL FILE_sub_travel .FILL FOLDER_NAME_sub_travel FOLDER_NAME_sub_travel .STRINGZ \"sub_travel\" ;;; ------------------------file_info------------------------------------- FILE_root .FILL x0000 ; nextfile .FILL FILE_NAME_root ; filename FILE_NAME_root .STRINGZ \"config.sys\" FILE_projects .FILL x0000 .FILL FILE_NAME_projects FILE_NAME_projects .STRINGZ \"README.md\" FILE_c_project .FILL FILE_c_project_2 .FILL FILE_NAME_c_project1 FILE_NAME_c_project1 .STRINGZ \"main.c\" FILE_c_project_2 .FILL x0000 .FILL FILE_NAME_c_project2 FILE_NAME_c_project2 .STRINGZ \"Makefile\" FILE_utils .FILL x0000 .FILL FILE_NAME_utils FILE_NAME_utils .STRINGZ \"helper.c\" FILE_blog .FILL x0000 .FILL FILE_NAME_blog FILE_NAME_blog .STRINGZ \"index.md\" FILE_photos .FILL FILE_photos_2 .FILL FILE_NAME_photos1 FILE_NAME_photos1 .STRINGZ \"IMG001.jpg\" FILE_photos_2 .FILL x0000 .FILL FILE_NAME_photos2 FILE_NAME_photos2 .STRINGZ \"IMG002.jpg\" FILE_travel .FILL FILE_travel_2 .FILL FILE_NAME_travel1 FILE_NAME_travel1 .STRINGZ \"trip.txt\" FILE_travel_2 .FILL x0000 .FILL FILE_NAME_travel2 FILE_NAME_travel2 .STRINGZ \"map.png\" FILE_python_project .FILL FILE_python_project_2 .FILL FILE_NAME_python_project1 FILE_NAME_python_project1 .STRINGZ \"main.py\" FILE_python_project_2 .FILL x0000 .FILL FILE_NAME_python_project2 FILE_NAME_python_project2 .STRINGZ \"requirements.txt\" FILE_documents .FILL FILE_documents_2 .FILL FILE_NAME_documents1 FILE_NAME_documents1 .STRINGZ \"meeting_notes.docx\" FILE_documents_2 .FILL x0000 .FILL FILE_NAME_documents_2 FILE_NAME_documents_2 .STRINGZ \"todo_list.txt\" FILE_reports .FILL FILE_reports_2 .FILL FILE_NAME_reports1 FILE_NAME_reports1 .STRINGZ \"q1_report.pdf\" FILE_reports_2 .FILL x0000 .FILL FILE_NAME_reports2 FILE_NAME_reports2 .STRINGZ \"budget_summary.xlsx\" FILE_presentations .FILL x0000 .FILL FILE_NAME_presentations1 FILE_NAME_presentations1 .STRINGZ \"project_kickoff.pptx\" FILE_sub_travel .FILL x0000 .FILL FILE_NAME_sub_travel FILE_NAME_sub_travel .STRINGZ \"packing_list.md\" ","wordCount":"2362","inLanguage":"en","datePublished":"2025-05-26T00:00:00+08:00","dateModified":"2025-05-26T00:00:00+08:00","mainEntityOfPage":{"@type":"WebPage","@id":"https://hanbinzheng.github.io/blog/lc3-brief-review/"},"publisher":{"@type":"Organization","name":"Hanbin Zheng","logo":{"@type":"ImageObject","url":"https://hanbinzheng.github.io/favicon.ico"}}}</script></head><body id=top><script>localStorage.getItem("pref-theme")==="dark"?document.body.classList.add("dark"):localStorage.getItem("pref-theme")==="light"?document.body.classList.remove("dark"):window.matchMedia("(prefers-color-scheme: dark)").matches&&document.body.classList.add("dark")</script><header class=header><nav class=nav><div class=logo><a href=https://hanbinzheng.github.io/ accesskey=h title="Hanbin Zheng (Alt + H)">Hanbin Zheng</a><div class=logo-switches><button id=theme-toggle accesskey=t title="(Alt + T)" aria-label="Toggle theme">
<svg id="moon" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><path d="M21 12.79A9 9 0 1111.21 3 7 7 0 0021 12.79z"/></svg>
<svg id="sun" width="24" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"><circle cx="12" cy="12" r="5"/><line x1="12" y1="1" x2="12" y2="3"/><line x1="12" y1="21" x2="12" y2="23"/><line x1="4.22" y1="4.22" x2="5.64" y2="5.64"/><line x1="18.36" y1="18.36" x2="19.78" y2="19.78"/><line x1="1" y1="12" x2="3" y2="12"/><line x1="21" y1="12" x2="23" y2="12"/><line x1="4.22" y1="19.78" x2="5.64" y2="18.36"/><line x1="18.36" y1="5.64" x2="19.78" y2="4.22"/></svg></button></div></div><ul id=menu><li><a href=https://hanbinzheng.github.io/ title=Home><span>Home</span></a></li><li><a href=https://hanbinzheng.github.io/academic title=Academic><span>Academic</span></a></li><li><a href=https://hanbinzheng.github.io/about title=About><span>About</span></a></li><li><a href=https://hanbinzheng.github.io/blog title=Blog><span>Blog</span></a></li><li><a href=https://hanbinzheng.github.io/archive title=Archive><span>Archive</span></a></li><li><a href=https://hanbinzheng.github.io/else title=Else><span>Else</span></a></li></ul></nav></header><main class=main><article class=post-single><header class=post-header><h1 class="post-title entry-hint-parent">LC3 Brief Review</h1><div class=post-meta><span title='2025-05-26 00:00:00 +0800 +0800'>May 26, 2025</span></div></header><div class=post-content><blockquote><p>This is a brief review for some topics of ECE220.</p><p>Since this website cannot render asm code blocks properly, I used nasm instead — though this is actually LC-3 assembly code.</p></blockquote><h2 id=i-purpose-and-description>I. Purpose and Description<a hidden class=anchor aria-hidden=true href=#i-purpose-and-description>#</a></h2><h3 id=1-purpose>1. Purpose<a hidden class=anchor aria-hidden=true href=#1-purpose>#</a></h3><p>This program serves as a review for:</p><ol><li>LC3 basics (including I/O)</li><li>Run-time stack</li><li>Recursion (LC3 implementation)</li><li>Linked list (LC3 implementation)</li><li>Binary tree (LC3 implementation)</li></ol><h3 id=2-descriptions>2. Descriptions<a hidden class=anchor aria-hidden=true href=#2-descriptions>#</a></h3><ol><li>This file primarily serves as a direct LC-3 translation of a C program that prints a file directory structure.</li><li>The content to be printed is pre-stored in specific data structures. The program prints this content to the console in a pre-order traversal with a specified output format (see desired output for details).</li><li>To fully cover the previous purposes and simulate how C programs are translated into lower-level assembly language, all user-defined C functions are implemented on a run-time stack. Additionally, we&rsquo;ve implemented our own &ldquo;system call&rdquo; equivalent to &ldquo;OUT&rdquo; and &ldquo;PUTS&rdquo; (corresponding to C&rsquo;s <code>printf()</code> function). We name them &ldquo;PRINT_A_CHAR&rdquo; and &ldquo;PRINT_A_STRING&rdquo; respectively. These subroutines don&rsquo;t utilize a run-time stack, just as typical system calls in real-world machines. Their implementation is exactly the same as how LC-3 machine implements &ldquo;OUT&rdquo; and &ldquo;PUTS&rdquo; in its System Space (from <code>x0450</code> to <code>x0462</code>).</li><li>The provided test case is absolutely not exhaustive. It was primarily generated by Gemini, and I&rsquo;ve only revised some grammar mistakes to ensure it works properly for LC-3 syntax. Feel free to add any additional test cases.</li></ol><h3 id=3-data-structure-design>3. Data Structure Design<a hidden class=anchor aria-hidden=true href=#3-data-structure-design>#</a></h3><h4 id=1-data-structure-for-folders-and-files>(1) Data Structure for Folders and Files<a hidden class=anchor aria-hidden=true href=#1-data-structure-for-folders-and-files>#</a></h4><p><strong>Data Structure of Files in a Folder (linked list):</strong></p><ul><li><code>[0]</code> next pointer：points to next file node (if missing, <code>NULL</code>)</li><li><code>[1]</code> file name (<code>.STRINGZ</code>)</li></ul><p><strong>Data Structure of Folder Nodes：</strong></p><ul><li><code>[0]</code> left pointer：points to the left child (if missing, <code>NULL</code>)</li><li><code>[1]</code> right pointer：points to the right child (if missing, <code>NULL</code>)</li><li><code>[2]</code> file pointer：points to the head of the linked list (if missing, <code>NULL</code>)</li><li><code>[3]</code> folder name (<code>.STRINGZ</code>)</li></ul><h4 id=2-tree-structure-of-folders-testcase-emample>(2) Tree Structure of Folders (testcase emample)<a hidden class=anchor aria-hidden=true href=#2-tree-structure-of-folders-testcase-emample>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>                      root
</span></span><span style=display:flex><span>               /                 \
</span></span><span style=display:flex><span>         projects                media
</span></span><span style=display:flex><span>         /     \             /          \
</span></span><span style=display:flex><span>   c_project   blog    documents        photos
</span></span><span style=display:flex><span>   /     \               /     \             \
</span></span><span style=display:flex><span>utils   python_project  reports presentations travel
</span></span><span style=display:flex><span>                                            \
</span></span><span style=display:flex><span>                                           sub_travel
</span></span></code></pre></div><h4 id=3-files-structure-testcase-example>(3) Files Structure (testcase example)<a hidden class=anchor aria-hidden=true href=#3-files-structure-testcase-example>#</a></h4><ul><li>root: config.sys</li><li>projects: README.md</li><li>c_project: main.c -> Makefile</li><li>utils: helper.c</li><li>python_project: main.py -> requirements.txt</li><li>blog: index.md</li><li>media: (empty)</li><li>documents: meeting_notes.docx -> todo_list.txt</li><li>reports: q1_report.pdf -> budget_summary.xlsx</li><li>presentations: project_kickoff.pptx</li><li>photos: IMG001.jpg -> IMG002.jpg</li><li>travel: trip.txt -> map.png</li><li>sub_travel: packing_list.md</li></ul><h4 id=4-c-structs-and-function-prototypes>(4) C Structs and Function Prototypes<a hidden class=anchor aria-hidden=true href=#4-c-structs-and-function-prototypes>#</a></h4><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-c data-lang=c><span style=display:flex><span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>struct</span> f{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>struct</span> f<span style=color:#f92672>*</span> nextfile;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> filename;
</span></span><span style=display:flex><span>} file_node;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>typedef</span> <span style=color:#66d9ef>struct</span> F{
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>struct</span> F<span style=color:#f92672>*</span> left;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>struct</span> F<span style=color:#f92672>*</span> right;
</span></span><span style=display:flex><span>    file_node<span style=color:#f92672>*</span> file;
</span></span><span style=display:flex><span>    <span style=color:#66d9ef>const</span> <span style=color:#66d9ef>char</span><span style=color:#f92672>*</span> foldername;
</span></span><span style=display:flex><span>} folder_node;
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>// For detailed definitions, refers to comments before each subroutine
</span></span></span><span style=display:flex><span><span style=color:#75715e></span>
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>print_space</span>(<span style=color:#66d9ef>int</span> n);
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>print_file</span>(<span style=color:#66d9ef>int</span> num, file_node<span style=color:#f92672>*</span> file);
</span></span><span style=display:flex><span><span style=color:#66d9ef>void</span> <span style=color:#a6e22e>print_folder</span>(<span style=color:#66d9ef>int</span> depth, folder_node<span style=color:#f92672>*</span> folder);
</span></span></code></pre></div><h3 id=4-desired-output>4. Desired Output<a hidden class=anchor aria-hidden=true href=#4-desired-output>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-plaintext data-lang=plaintext><span style=display:flex><span>root
</span></span><span style=display:flex><span>    file: config.sys
</span></span><span style=display:flex><span>    projects
</span></span><span style=display:flex><span>        file: README.md
</span></span><span style=display:flex><span>        c_project
</span></span><span style=display:flex><span>            file: main.c Makefile
</span></span><span style=display:flex><span>            utils
</span></span><span style=display:flex><span>                file: helper.c
</span></span><span style=display:flex><span>            python_project
</span></span><span style=display:flex><span>                file: main.py requirements.txt
</span></span><span style=display:flex><span>        blog
</span></span><span style=display:flex><span>            file: index.md
</span></span><span style=display:flex><span>    media
</span></span><span style=display:flex><span>        documents
</span></span><span style=display:flex><span>            file: meeting_notes.docx todo_list.txt
</span></span><span style=display:flex><span>            reports
</span></span><span style=display:flex><span>                file: q1_report.pdf budget_summary.xlsx
</span></span><span style=display:flex><span>            presentations
</span></span><span style=display:flex><span>                file: project_kickoff.pptx
</span></span><span style=display:flex><span>        photos
</span></span><span style=display:flex><span>            file: IMG001.jpg IMG002.jpg
</span></span><span style=display:flex><span>            travel
</span></span><span style=display:flex><span>                file: trip.txt map.png
</span></span><span style=display:flex><span>                sub_travel
</span></span><span style=display:flex><span>                    file: packing_list.md
</span></span></code></pre></div><h3 id=5-conventions>5. Conventions<a hidden class=anchor aria-hidden=true href=#5-conventions>#</a></h3><p>These conventions are based on my understanding and memory of run-time stack implementations. Please flag any mistakes.</p><p><strong>Registers:</strong></p><ul><li><strong>R4:</strong> Global variable pointer</li><li><strong>R5:</strong> Stack frame pointer (base of local variables)</li><li><strong>R6:</strong> Stack top pointer</li></ul><p><strong>Stack structure for each function call:</strong></p><ul><li><code>M[R5 - ?]</code> &lt;- other local variables</li><li><code>M[R5 + 0]</code> &lt;- base variable/first local variables (if any)</li><li><code>M[R5 + 1]</code> &lt;- caller&rsquo;s frame pointer</li><li><code>M[R5 + 2]</code> &lt;- return address</li><li><code>M[R5 + 3]</code> &lt;- return value (reserved even for void functions)</li><li><code>M[R5 + ?]</code> &lt;- function arguments</li></ul><p><strong>Other Conventions:</strong></p><ol><li>Function arguments and variables should be accessed via <strong>R5</strong> (frame pointer) and appropriate offsets, instead of <strong>R6</strong>.</li><li>Function arguments should be pushed into the stack from the right to the left before the call, and local variables should be pushed from top to bottom into the stack.</li></ol><p><strong>Special Clarification:</strong></p><ol><li>In this program, all C functions conceptually have no local variables in their definitions. However, omitting local variables in run-time stack will lead to &ldquo;undefined&rdquo; behaviors (or at least, I failed to find corresponding descriptions in our textbook). For convenience, I redundantly assigned a local variable for <code>print_space()</code>, <code>print_file()</code>, and <code>print_folder()</code> to hide this issue.</li><li>The <code>main</code> function still lacks local variables. I was unsure how to handle this so I left <strong>R5</strong> undefined within the <code>main</code> function. However, <strong>R5</strong> is correctly defined in all other three functions, and this omission in <code>main</code> doesn&rsquo;t affect the overall program behavior.</li></ol><h2 id=ii-lc3-translation-of-c-functions>II. LC3 Translation of C Functions<a hidden class=anchor aria-hidden=true href=#ii-lc3-translation-of-c-functions>#</a></h2><h3 id=1-main-function>1. main() function<a hidden class=anchor aria-hidden=true href=#1-main-function>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nasm data-lang=nasm><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; --------------------mian_function-------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; int main() {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     folder_node* root = get_info();     // get_info() is too complex for me to execute with lc3</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;                                         // We assume that the info has been read and stored in known data structure</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     print_folder(0, rootnode);          // See next subroutine for function definition</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     return 0;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; R0/R1: temporary register.</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.ORIG</span>   x3000
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; set stack top pointer(R6) equals to stack bottom</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R6, STACK_BOTTOM
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; main functioin has no local variable and thus I ommit setting R5</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; push arguments for print_folder();</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>AND</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LEA</span>  R1, FOLDER_root
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R1, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; call pirnt_folder()</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_FOLDER
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; pop return value(though void) and arguments</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>HALT</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>STACK_BOTTOM</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   x4000
</span></span></code></pre></div><h3 id=2-print_folder-function>2. print_folder() function<a hidden class=anchor aria-hidden=true href=#2-print_folder-function>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nasm data-lang=nasm><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; ----------------------PRINT_FOLDER------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; void print_folder(int depth, folder_node* node) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     // This is only check for floder_node* root, not base case for all recursion step.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     // A NULL node cannot be passed in if that node is not the root.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     if(node == NULL) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         return;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     print_space(depth);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     folder_node* current = node;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     printf(&#34;%s&#34;, current-&gt;foldername);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     // pre_order print the folder</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     if(current-&gt;file != NULL) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         printf(&#34;\n&#34;);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         print_file(depth+1, current-&gt;file);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     if(current-&gt;left != NULL) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         printf(&#34;\n&#34;);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         print_folder(depth+1, current-&gt;left);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     if(current-&gt;right != NULL) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         printf(&#34;\n&#34;);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         print_folder(depth+1, current-&gt;right);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; R0: temporary register. Caller save is required.</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FOLDER</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; set book-keeping info</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>             <span style=color:#75715e>; store return address</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R7, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>             <span style=color:#75715e>; store caller&#39;s frame pointer</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R5, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>             <span style=color:#75715e>; set R5 as new frame pointer</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R5, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; begin execution</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; if(node == NULL) condition statements</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRz</span> PRINT_FOLDER_DONE
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; print space and folder name</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>4</span>              <span style=color:#75715e>; print_space(depth);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_SPACE
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>2</span>              <span style=color:#75715e>; pop the return value and argument</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>5</span>              <span style=color:#75715e>; folder_node* current = node;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; printf(&#34;%s&#34;, current-&gt;file);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>3</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_A_STRING
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FOLDER_FILE</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; print the file for current folder</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; if(current-&gt;file != NULL) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     printf(&#34;\n&#34;);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     print_file(depth+1, current-&gt;file);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; file ?= NULL</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRz</span> PRINT_FOLDER_LEFT
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; printf(&#34;\n&#34;);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R0, PRINT_FOLDER_NEWLINE
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_A_CHAR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; print_file(depth+1, current-&gt;file);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; push current-&gt;file into stack</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>4</span>              <span style=color:#75715e>; push depth+1 into stack</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_FILE              <span style=color:#75715e>; call print_file()</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>3</span>              <span style=color:#75715e>; pop return value and arguments</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FOLDER_LEFT</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; print the left child</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; if(current-&gt;left != NULL) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     printf(&#34;\n&#34;);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     print_folder(depth+1, current-&gt;left);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; current-&gt;left ?= NULL</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRz</span> PRINT_FOLDER_RIGHT
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; printf(&#34;\n&#34;);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R0, PRINT_FOLDER_NEWLINE
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_A_CHAR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; print_folder(depth+1, current-&gt;left);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; push current-&gt;left into stack</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>4</span>              <span style=color:#75715e>; push depth+1 into stack</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_FOLDER            <span style=color:#75715e>; recursive call</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>3</span>              <span style=color:#75715e>; pop return value and arguments</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FOLDER_RIGHT</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; rpint the right child</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; if(current-&gt;right != NULL) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     printf(&#34;\n&#34;);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     print_folder(depth+1, current-&gt;right);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; current-&gt;right ?= NULL</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRz</span> PRINT_FOLDER_DONE
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; printf(&#34;\n&#34;);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R0, PRINT_FOLDER_NEWLINE
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_A_CHAR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; print_folder(depth+1, current-&gt;right);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; push current-&gt;right into stack</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>4</span>              <span style=color:#75715e>; push depth+1 into stack</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_FOLDER            <span style=color:#75715e>; recursive call</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>3</span>              <span style=color:#75715e>; pop return value and arguments</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FOLDER_DONE</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; return control to caller</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>              <span style=color:#75715e>; restore caller&#39;s frame pointer</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R5, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>              <span style=color:#75715e>; get return address</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R7, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>              <span style=color:#75715e>; point R6 to return value</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>RET</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FOLDER_NEWLINE</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FOLDER_SAVE_R0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   x0000
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FOLDER_SAVE_R1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   x0000
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FOLDER_SAVE_R2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   x0000
</span></span></code></pre></div><h3 id=3-print_file-function>3. print_file() function<a hidden class=anchor aria-hidden=true href=#3-print_file-function>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nasm data-lang=nasm><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; ----------------------PRINT_FILE--------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; void print_file(int num, file_node * file) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     if(file == NULL) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         return;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     } else {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         file_node* next = file;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     print_space(num);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     printf(&#34;file: &#34;);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     while(next != NULL) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         print(&#34;%s &#34;, next-&gt;filename);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         _next = next.nextfile;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; R0:  temporary register</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FILE</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; set book-keeping info</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R7, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; store return address</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R5, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; store caller&#39;s frame pointer</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R5, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; set R5 as new frame pointer</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; begin execution</span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; if(file == NULL) condition statements</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ST</span>  R0, PRINT_FILE_SAVE_R0
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>5</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRz</span> PRINT_FILE_DONE
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; print_space(num);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>4</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; call print_space()</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_SPACE
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>2</span>              <span style=color:#75715e>; pop return value &amp; arguments</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; printf(&#34;file: &#34;);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LEA</span> R0, PRINT_FILE_PROMPT
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_A_STRING
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; while loop</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FILE_LOOP</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; while condition</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRz</span> PRINT_FILE_DONE
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>              <span style=color:#75715e>; printf(&#34;%s &#34;, next-&gt;filename);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_A_STRING
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R0, PRINT_FILE_SPACE
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_A_CHAR
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; next-&gt;nextfile</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRnzp</span>   PRINT_FILE_LOOP
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FILE_DONE</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; return control to caller</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R0, PRINT_FILE_SAVE_R0
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>              <span style=color:#75715e>; restore caller&#39;s frame pointer</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R5, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>              <span style=color:#75715e>; get return address</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R7, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>              <span style=color:#75715e>; point R6 to return value</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>RET</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FILE_SPACE</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FILE_PROMPT</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;file: &#34;</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FILE_NEWLINE</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>10</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_FILE_SAVE_R0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   x0000
</span></span></code></pre></div><h3 id=4-print_space-function>4. print_space() function<a hidden class=anchor aria-hidden=true href=#4-print_space-function>#</a></h3><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nasm data-lang=nasm><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; ---------------------PRINT_SPACE------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; void print_space(int n) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     int i = 4 * n;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     while(i &gt; 0) {</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         printf(&#34; &#34;);</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;         i--;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;     }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; }</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;;</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; R0: temporary register</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_SPACE</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; set book-keeping info</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>2</span>             <span style=color:#75715e>; store return address</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R7, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>             <span style=color:#75715e>; store caller&#39;s frame pointer</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R5, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>             <span style=color:#75715e>; set R5 as new frame pointer</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R5, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; begin execution of PRINT_SPACE</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ST</span>  R0, PRINT_SPACE_SAVE_R0
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>4</span>              <span style=color:#75715e>; int i = 4 * n;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R0, R0, R0
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R0, R0, R0
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#75715e>;; while loop</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_SPACE_LOOP</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; while condition</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRz</span> PRINT_SPACE_DONE
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R0, PRINT_SPACE_SPACE   <span style=color:#75715e>; printf(&#34; &#34;);</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>OUT</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>              <span style=color:#75715e>; i--;</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R0, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#f92672>-</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STR</span> R0, R5, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRnzp</span>   PRINT_SPACE_LOOP
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_SPACE_DONE</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; return control to caller</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R0, PRINT_SPACE_SAVE_R0
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>              <span style=color:#75715e>; restore caller&#39;s frame pointer</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R5, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>              <span style=color:#75715e>; get return value</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R7, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R6, R6, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>              <span style=color:#75715e>; point R6 to return value</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>RET</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_SPACE_SPACE</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>32</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_SPACE_SAVE_R0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   x0000
</span></span></code></pre></div><h2 id=iii-print_a_char-and-print_a_string-system-call>III. PRINT_A_CHAR and PRINT_A_STRING System Call<a hidden class=anchor aria-hidden=true href=#iii-print_a_char-and-print_a_string-system-call>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nasm data-lang=nasm><span style=display:flex><span><span style=color:#75715e>;;; -------------------------PRINT_A_CHAR---------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; The same as &#34;OUT&#34;. See lc3 memory form x0450 to x0455 for details.</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_A_CHAR</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ST</span>  R1, PRINT_A_CHAR_SAVE_R1
</span></span><span style=display:flex><span><span style=color:#a6e22e>POLLING</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDI</span> R1, DSR
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRzp</span>    POLLING
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>STI</span>     R0, DDR
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R1, PRINT_A_CHAR_SAVE_R1
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>RET</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_A_CHAR_SAVE_R1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   x0000
</span></span><span style=display:flex><span><span style=color:#a6e22e>DSR</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   xFE04
</span></span><span style=display:flex><span><span style=color:#66d9ef>DD</span>R
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   xFE06
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; -------------------------PRINT_A_STRING-------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; The same as &#34;PUTS&#34;. See lc3 memory from x0456 to x0462 for details.</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_A_STRING</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ST</span>  R0, PRINT_A_STRING_SAVE_R0
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ST</span>  R1, PRINT_A_STRING_SAVE_R1
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ST</span>  R7, PRINT_A_STRING_SAVE_R7
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R1, R0, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_A_STRING_LOOP</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LDR</span> R0, R1, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRz</span> PRINT_A_STRING_DONE
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>JSR</span> PRINT_A_CHAR
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>ADD</span> R1, R1, <span style=color:#960050;background-color:#1e0010>#</span><span style=color:#ae81ff>1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>BRnzp</span>   PRINT_A_STRING_LOOP
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_A_STRING_DONE</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R0, PRINT_A_STRING_SAVE_R0
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R1, PRINT_A_STRING_SAVE_R1
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>LD</span>  R7, PRINT_A_STRING_SAVE_R7
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>RET</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_A_STRING_SAVE_R0</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   x0000
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_A_STRING_SAVE_R1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   x0000
</span></span><span style=display:flex><span><span style=color:#a6e22e>PRINT_A_STRING_SAVE_R7</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span>   x0000
</span></span></code></pre></div><h2 id=iv-data>IV. Data<a hidden class=anchor aria-hidden=true href=#iv-data>#</a></h2><div class=highlight><pre tabindex=0 style=color:#f8f8f2;background-color:#272822;-moz-tab-size:4;-o-tab-size:4;tab-size:4><code class=language-nasm data-lang=nasm><span style=display:flex><span><span style=color:#75715e>;;; -------------------------folder_info-----------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_root</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_projects       <span style=color:#75715e>; left</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_media          <span style=color:#75715e>; right</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_root             <span style=color:#75715e>; file</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_root      <span style=color:#75715e>; foldername</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_root</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;root&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_projects</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_c_project
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_blog
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_projects
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_projects
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_projects</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;projects&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_c_project</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_utils
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_python_project
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_c_project
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_c_project
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_c_project</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;c_project&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_utils</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_utils
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_utils
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_utils</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;utils&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_blog</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_blog
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_blog
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_blog</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;blog&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_media</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_documents
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_photos
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_media
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_media</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;media&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_photos</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_travel
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_photos
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_photos
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_photos</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;photos&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_travel</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_sub_travel
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_travel
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_travel
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_travel</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;travel&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_python_project</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_python_project
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_python_project
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_python_project</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;python_project&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_documents</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_reports
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_presentations
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_documents
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_documents
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_documents</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;documents&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_reports</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_reports
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_reports
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_reports</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;reports&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_presentations</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_presentations
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_presentations
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_presentations</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;presentations&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_sub_travel</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_sub_travel
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FOLDER_NAME_sub_travel
</span></span><span style=display:flex><span><span style=color:#a6e22e>FOLDER_NAME_sub_travel</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;sub_travel&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#75715e>;;; ------------------------file_info-------------------------------------</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_root</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000                 <span style=color:#75715e>; nextfile</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_root        <span style=color:#75715e>; filename</span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_root</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;config.sys&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_projects</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_projects
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_projects</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;README.md&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_c_project</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_c_project_2
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_c_project1
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_c_project1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;main.c&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_c_project_2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_c_project2
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_c_project2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;Makefile&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_utils</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_utils
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_utils</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;helper.c&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_blog</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_blog
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_blog</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;index.md&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_photos</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_photos_2
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_photos1
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_photos1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;IMG001.jpg&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_photos_2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_photos2
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_photos2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;IMG002.jpg&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_travel</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_travel_2
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_travel1
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_travel1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;trip.txt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_travel_2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_travel2
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_travel2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;map.png&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_python_project</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_python_project_2
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_python_project1
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_python_project1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;main.py&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_python_project_2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_python_project2
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_python_project2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;requirements.txt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_documents</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_documents_2
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_documents1
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_documents1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;meeting_notes.docx&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_documents_2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_documents_2
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_documents_2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;todo_list.txt&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_reports</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_reports_2
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_reports1
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_reports1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;q1_report.pdf&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_reports_2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_reports2
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_reports2</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;budget_summary.xlsx&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_presentations</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_presentations1
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_presentations1</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;project_kickoff.pptx&#34;</span>
</span></span><span style=display:flex><span>
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_sub_travel</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> x0000
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.FILL</span> FILE_NAME_sub_travel
</span></span><span style=display:flex><span><span style=color:#a6e22e>FILE_NAME_sub_travel</span>
</span></span><span style=display:flex><span>    <span style=color:#a6e22e>.STRINGZ</span> <span style=color:#e6db74>&#34;packing_list.md&#34;</span>
</span></span><span style=display:flex><span>    
</span></span></code></pre></div></div><footer class=post-footer><ul class=post-tags><li><a href=https://hanbinzheng.github.io/tags/lc3/>Lc3</a></li><li><a href=https://hanbinzheng.github.io/tags/assembly/>Assembly</a></li><li><a href=https://hanbinzheng.github.io/tags/recursion/>Recursion</a></li><li><a href=https://hanbinzheng.github.io/tags/data-structures/>Data-Structures</a></li></ul></footer></article></main><footer class=footer><span>&copy; 2025 <a href=https://hanbinzheng.github.io/>Hanbin Zheng</a></span> ·
<span>Powered by
<a href=https://gohugo.io/ rel="noopener noreferrer" target=_blank>Hugo</a> &
<a href=https://github.com/adityatelange/hugo-PaperMod/ rel=noopener target=_blank>PaperMod</a></span></footer><a href=#top aria-label="go to top" title="Go to Top (Alt + G)" class=top-link id=top-link accesskey=g><svg viewBox="0 0 12 6" fill="currentColor"><path d="M12 6H0l6-6z"/></svg>
</a><script>let menu=document.getElementById("menu");menu&&(menu.scrollLeft=localStorage.getItem("menu-scroll-position"),menu.onscroll=function(){localStorage.setItem("menu-scroll-position",menu.scrollLeft)}),document.querySelectorAll('a[href^="#"]').forEach(e=>{e.addEventListener("click",function(e){e.preventDefault();var t=this.getAttribute("href").substr(1);window.matchMedia("(prefers-reduced-motion: reduce)").matches?document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView():document.querySelector(`[id='${decodeURIComponent(t)}']`).scrollIntoView({behavior:"smooth"}),t==="top"?history.replaceState(null,null," "):history.pushState(null,null,`#${t}`)})})</script><script>var mybutton=document.getElementById("top-link");window.onscroll=function(){document.body.scrollTop>800||document.documentElement.scrollTop>800?(mybutton.style.visibility="visible",mybutton.style.opacity="1"):(mybutton.style.visibility="hidden",mybutton.style.opacity="0")}</script><script>document.getElementById("theme-toggle").addEventListener("click",()=>{document.body.className.includes("dark")?(document.body.classList.remove("dark"),localStorage.setItem("pref-theme","light")):(document.body.classList.add("dark"),localStorage.setItem("pref-theme","dark"))})</script></body></html>